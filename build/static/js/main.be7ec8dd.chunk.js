(this.webpackJsonpfileserverhome=this.webpackJsonpfileserverhome||[]).push([[0],{45:function(e,t,c){},46:function(e,t,c){},86:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),a=c(18),i=c.n(a),l=(c(45),c(46),c(9)),r=c(13),o=c(37),d=c(38),j=c(40),u=c(15),h="SET_FILES",b="SET_HEALTH",f={parentId:-1,files:[]},O={healthy:!0},p=Object(r.combineReducers)({files:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,c=t.type,n=t.payload;switch(c){case h:return Object(u.a)(Object(u.a)({},e),{},{parentId:n.parentId,files:Object(j.a)(n.files)});default:return e}},healthCheck:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0,c=t.type,n=t.payload;switch(c){case b:return Object(u.a)(Object(u.a)({},e),{},{healthy:n});default:return e}}}),v=[d.a],x=Object(r.createStore)(p,{},Object(o.composeWithDevTools)(r.applyMiddleware.apply(void 0,v))),g=c(12),m=c(3),y=c(27),I=c(14),k=c.n(I),w=c(21),F=c(11),E=c.n(F),S=function(e,t,c){return function(){var c=Object(w.a)(k.a.mark((function c(n){var s,a,i;return k.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return s="",t||!e?(s="/fs/getPaginated?pageNo=1&pageSize=100",e=0):s="fs/getFilesByParentId?parentID=".concat(e),c.prev=2,c.next=5,E.a.get(s);case 5:a=c.sent,console.log("resp ",a),i=a.data,console.log(),n({type:h,payload:{parentId:e,files:i}}),c.next=15;break;case 12:c.prev=12,c.t0=c.catch(2),console.error(c.t0);case 15:case"end":return c.stop()}}),c,null,[[2,12]])})));return function(e){return c.apply(this,arguments)}}()},C=c(1),N={getFiles:S},D=Object(l.b)((function(e){return{}}),N)((function(e){var t=e.file,c=e.getFiles,n=e.openDeleteModal;if(!t)return"Empty File";console.log("getFiles is",c);var s=t.DisplayName,a=t.FileName,i=t.CreatedAt,l=t.Id,r=t.IsDir,o=new Date(i).toDateString();return Object(C.jsxs)("div",{class:"ui card",children:[Object(C.jsx)("div",{class:"content",children:Object(C.jsxs)("div",{className:"header",style:{"word-break":"break-all"},"data-tooltip":a,children:[r&&Object(C.jsx)("i",{class:"folder icon"}),s," "]})}),Object(C.jsx)("div",{class:"content",children:Object(C.jsx)("div",{class:"ui small feed",children:Object(C.jsx)("div",{class:"event",children:Object(C.jsx)("div",{class:"content",children:Object(C.jsxs)("div",{class:"summary",children:[Object(C.jsx)("i",{class:"calendar alternate outline icon"}),o]})})})})}),Object(C.jsxs)("div",{class:"extra content ",children:[r?Object(C.jsx)(g.b,{to:"/?id="+l,children:Object(C.jsx)("i",{class:"folder icon open big",onClick:function(){c(l)}})}):Object(C.jsx)("a",{href:"http://192.168.1.27:9010/fs/downloadFileById?id="+l,children:Object(C.jsx)("i",{class:"cloud download icon big"})}),Object(C.jsx)("div",{class:"right floated author",children:Object(C.jsx)("i",{class:"trash alternate outline icon big",onClick:function(){n(l)}})})]})]})})),L=c(39),T=c.n(L),H={getFiles:S},R=Object(l.b)((function(e){return{fileItems:e.files.files}}),H)((function(e){var t=T.a.parse(e.location.search).id;console.log("token",t);var c=e.getFiles,s=e.fileItems,a=Object(n.useState)(!1),i=Object(y.a)(a,2),l=i[0],r=i[1],o=Object(n.useState)(0),d=Object(y.a)(o,2),j=d[0],u=d[1];Object(n.useEffect)((function(){t?c(t):c(null,!0)}),[t]);var h=function(e){console.log("show delete modal"),u(e),r(!0)};return Object(C.jsxs)("div",{className:"ui three column grid",children:[s&&s.length>0?s.map((function(e){return Object(C.jsx)("div",{className:"column",children:Object(C.jsx)(D,{file:e,openDeleteModal:h},e.Id)},e.Id)})):"No files found",l&&Object(C.jsxs)("div",{class:"ui basic modal",children:[Object(C.jsx)("div",{class:"ui icon header",children:Object(C.jsx)("i",{class:"trash alternate outline icon"})}),Object(C.jsx)("div",{class:"content",children:Object(C.jsx)("p",{children:"Delete file?"})}),Object(C.jsxs)("div",{class:"actions",children:[Object(C.jsxs)("div",{class:"ui red basic cancel inverted button",children:[Object(C.jsx)("i",{class:"remove icon",onClick:function(){r(!1)}}),"No"]}),Object(C.jsxs)("div",{class:"ui green ok inverted button",children:[Object(C.jsx)("i",{class:"checkmark icon",onClick:function(){console.log("delete file ",j),r(!1)}}),"Yes"]})]})]})]})})),_=function(e,t,c){return function(){var e=Object(w.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/fs/health",e.prev=1,e.next=4,E.a.get("/fs/health");case 4:e.sent,t({type:b,payload:!0}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("err is ",e.t0),t({type:b,payload:!1});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},B={checkHealth:_},M=Object(l.b)((function(e){return console.log("state: ",e),{healthy:e.healthCheck.healthy}}),B)((function(e){var t=e.healthy;return console.log("healthy is ",t),Object(C.jsxs)("div",{className:"ui inverted menu",children:[Object(C.jsx)(g.b,{to:"/",children:Object(C.jsxs)("div",{className:"header item",children:[Object(C.jsx)("i",{className:"cloud upload icon"}),"FILE SERVER"]})}),Object(C.jsx)("div",{class:"right menu",children:Object(C.jsx)("div",{class:"item",children:t?Object(C.jsx)("i",{class:"green wifi icon big"}):Object(C.jsx)("i",{class:"red exclamation circle icon big"})})})]})}));var P=function(){return Object(C.jsx)(l.a,{store:x,children:Object(C.jsx)("div",{className:"ui container",children:Object(C.jsxs)(g.a,{children:[Object(C.jsx)(M,{}),Object(C.jsxs)(m.c,{children:[Object(C.jsx)(m.a,{path:"/:id",component:R}),Object(C.jsx)(m.a,{path:"/",component:R})]})]})})})},A=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,89)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;c(e),n(e),s(e),a(e),i(e)}))},J=c(88),K=function(){var e=Object(J.a)(),t="HEALTH_CHECK_WORKER_ID";localStorage.setItem(t,e);setInterval((function(){localStorage.getItem(t)==e&&x.dispatch(_())}),1e3)};E.a.defaults.baseURL="http://192.168.1.27:9010",K(),i.a.render(Object(C.jsx)(s.a.StrictMode,{children:Object(C.jsx)(P,{})}),document.getElementById("root")),A()}},[[86,1,2]]]);
//# sourceMappingURL=main.be7ec8dd.chunk.js.map